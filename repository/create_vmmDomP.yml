#It is generated by the script with the sourcing file as:1c_create_vmm_domain.yaml
  - name: pb1c Configure VSwitch Policy for VMM Domain with enhanced LAG
    aci_rest:
      hostname: '{{ inventory_hostname }}'
      username: '{{ username }}'
      password: '{{ password }}'
      validate_certs: no
      path: /api/node/mo/uni/vmmp-VMware/dom-{{ item.vmmDomainName }}.json
      method: post
      content: |
        {
                  "vmmDomP": {
                      "attributes": {
                          "accessMode": "read-write",
                          "annotation": "",
                          "arpLearning": "",
                          "aveTimeOut": "30",
                          "configInfraPg": "no",
                          "ctrlKnob": "epDpVerify",
                          "delimiter": "",
                          "dn": "uni/vmmp-VMware/dom-{{ item.vmmDomainName }}",
                          "enableAVE": "no",
                          "enableTag": "no",
                          "encapMode": "unknown",
                          "enfPref": "hw",
                          "epInventoryType": "on-link",
                          "epRetTime": "0",
                          "hvAvailMonitor": "no",
                          "mcastAddr": "0.0.0.0",
                          "mode": "default",
                          "name": "{{ item.vmmDomainName }}",
                          "nameAlias": "",
                          "ownerKey": "",
                          "ownerTag": "",
                          "prefEncapMode": "unspecified"
                      },
                      "children": [
                          {
                              "vmmVSwitchPolicyCont": {
                                  "attributes": {
                                      "annotation": "",
                                      "descr": "",
                                      "nameAlias": ""
                                  },
                                  "children": [
                                      {
                                          "vmmRsVswitchOverrideLldpIfPol": {
                                              "attributes": {
                                                  "annotation": "",
                                                  "tDn": "uni/infra/lldpIfP-LLDP_enable"
                                              }
                                          }
                                      },
                                      {
                                          "vmmRsVswitchOverrideLacpPol": {
                                              "attributes": {
                                                  "annotation": "",
                                                  "tDn": "uni/infra/lacplagp-LACP_passive"
                                              }
                                          }
                                      },
                                      {
                                          "vmmRsVswitchOverrideCdpIfPol": {
                                              "attributes": {
                                                  "annotation": "",
                                                  "tDn": "uni/infra/cdpIfP-CDP_disable"
                                              }
                                          }
                                      },
                                      {
                                          "lacpEnhancedLagPol": {
                                              "attributes": {
                                                  "annotation": "",
                                                  "id": "0",
                                                  "lbmode": "src-dst-ip-l4port-vlan",
                                                  "mode": "passive",
                                                  "name": "{{ item.elagName }}",
                                                  "nameAlias": "",
                                                  "numLinks": "4"
                                              }
                                          }
                                      }
                                  ]
                              }
                          },
                          {
                              "vmmRsDefaultStpIfPol": {
                                  "attributes": {
                                      "annotation": "",
                                      "tnStpIfPolName": ""
                                  }
                              }
                          },
                          {
                              "vmmRsDefaultLacpLagPol": {
                                  "attributes": {
                                      "annotation": "",
                                      "tnLacpLagPolName": ""
                                  }
                              }
                          },
                          {
                              "vmmRsDefaultL2InstPol": {
                                  "attributes": {
                                      "annotation": "",
                                      "tnL2InstPolName": ""
                                  }
                              }
                          },
                          {
                              "vmmRsDefaultFwPol": {
                                  "attributes": {
                                      "annotation": "",
                                      "tnNwsFwPolName": ""
                                  }
                              }
                          },
                          {
                              "vmmRsDefaultCdpIfPol": {
                                  "attributes": {
                                      "annotation": "",
                                      "tnCdpIfPolName": ""
                                  }
                              }
                          },
                          {
                              "vmmRsDefaultLldpIfPol": {
                                  "attributes": {
                                      "annotation": "",
                                      "tnLldpIfPolName": ""
                                  }
                              }
                          },
                        ]
                    }
                }
    with_items: "{{ vmmDomP }}"
    delegate_to: localhost

# the end
