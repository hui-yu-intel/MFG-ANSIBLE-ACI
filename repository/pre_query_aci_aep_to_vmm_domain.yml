#It is generated by the script with the sourcing file as:1c_create_vmm_domain.yaml
  - name: 1d Query Bind AEP to Fabric VMM Domain for User Tenant
    aci_aep_to_domain: &binding_present
      hostname: '{{ inventory_hostname }}'
      username: '{{ username }}'
      password: '{{ password }}'
      validate_certs: no
      aep: '{{ item.aaep }}'
      domain: '{{ item.Dom }}'
      domain_type: '{{ item.DomType }}'
      vm_provider: vmware
      state: query
    register: query_result
    with_items: "{{ aci_aep_to_vmm_domain }}"
    delegate_to: localhost


  - name: Assert the existing object
    assert:
      that:
      - item.current == []
      success_msg: "Object does not exist. Can create it."
      fail_msg: "Object exists. DO NOT recreate it!."
    with_items: "{{query_result.results}}"

