#It is generated by the source task as:create_aci_interface_policy_leaf_policy_group_nonvpc.yml
  - name: Post Query interface Policy Groups
    aci_interface_policy_leaf_policy_group:
      host: "{{ inventory_hostname }}"
      username: "{{ username }}"
      password: "{{ password }}"
      validate_certs: no
      policy_group: "{{ item.policyGroupName }}_PolGrp"
      description: "{{ item.policyGroupName }}"
      lag_type: "{{ item.lag_type }}"
      link_level_policy: "{{ item.portSpeed }}"
      cdp_policy: CDP_disable
      mcp_policy: MCP_enable
      lldp_policy: LLDP_enable
      stp_interface_policy: BPDUGuard_enable
      aep: "{{ item.aaepName }}"
      state: query
    register: query_result
    with_items: "{{ aci_nonvpci_policy_leaf_pol }}"
    delegate_to: localhost


  - name: Assert the existing object
    assert:
      that:
      - item.current != []
      success_msg: "Object exists in the Fabric."
      fail_msg: "Object does NOT exist in the Fabric."
    with_items: "{{query_result.results}}"

