#It is generated by the script with the sourcing file as:snmpv3_aci_updateV2_Rundeck.yml
  - name: Add new SNMP v3 Trap Receivers to snmp Dest Group
    aci_rest:
      host: "{{ inventory_hostname }}"
      username: "{{ username }}"
      password: "{{ password }}"
      validate_certs: no
      path: /api/node/mo/uni/fabric/snmpgroup-{{ item.snmpDestGrp }}/trapdest-{{ item.snmpV3TrapIp }}-port-162.json
      method: post
      content:  |
         {
                  "snmpTrapDest": {
                      "attributes": {
                          "annotation": "",
                          "descr": "",
                          "dn": "uni/fabric/snmpgroup-{{ item.snmpDestGrp }}/trapdest-{{ item.snmpV3TrapIp }}-port-162",
                          "host": "{{ item.snmpV3TrapIp  }}",
                          "name": "",
                          "nameAlias": "",
                          "notifT": "traps",
                          "port": "162",
                          "secName": "NMACIMonitor",
                          "v3SecLvl": "priv",
                          "ver": "v3"
                      },
                      "children": [
                          {
                              "fileRsARemoteHostToEpg": {
                                  "attributes": {
                                      "annotation": "",
                                      "tDn": "uni/tn-mgmt/mgmtp-default/oob-default"
                                  }
                              }
                          }
                      ]
                  }
              }
    with_items: "{{ snmpTrapDestv3 }}"
    delegate_to: localhost

# the end
