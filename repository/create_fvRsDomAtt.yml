#It is generated by the script with the sourcing file as:1c_create_vmm_domain.yaml
  - name: pb1c Attach enhanced LAG to VMM Domain in EPG Mapping
    aci_rest:
      hostname: '{{ inventory_hostname }}'
      username: '{{ username }}'
      password: '{{ password }}'
      validate_certs: no
      path: /api/node/mo/uni/tn-{{ item.tenantName }}/ap-{{ item.apName }}/epg-{{ item.epgName }}/rsdomAtt-[uni/vmmp-VMware/dom-{{ item.vmmDomainName }}].json
      method: post
      content: |
        {
           "fvRsDomAtt": {
               "attributes": {
                   "annotation": "",
                   "bindingType": "none",
                   "classPref": "encap",
                   "customEpgName": "",
                   "delimiter": "",
                   "dn": "uni/tn-{{ item.tenantName }}/ap-{{ item.apName }}/epg-{{ item.epgName }}/rsdomAtt-[uni/vmmp-VMware/dom-{{ item.vmmDomainName }}]",
                   "encap": "unknown",
                   "encapMode": "auto",
                   "epgCos": "Cos0",
                   "epgCosPref": "disabled",
                   "instrImedcy": "immediate",
                   "lagPolicyName": "",
                   "netflowDir": "both",
                   "netflowPref": "disabled",
                   "numPorts": "0",
                   "portAllocation": "none",
                   "primaryEncap": "unknown",
                   "primaryEncapInner": "unknown",
                   "resImedcy": "pre-provision",
                   "secondaryEncapInner": "unknown",
                   "switchingMode": "native",
                   "tDn": "uni/vmmp-VMware/dom-{{ item.vmmDomainName }}",
                   "untagged": "no",
                   "vnetOnly": "no"
               },
               "children": [
                       {
                            "vmmSecP": {
                                "attributes": {
                                    "allowPromiscuous": "reject",
                                    "annotation": "",
                                    "descr": "",
                                    "forgedTransmits": "reject",
                                    "macChanges": "reject",
                                    "name": "",
                                    "nameAlias": "",
                                    "ownerKey": "",
                                    "ownerTag": ""
                                }
                            }
                        },
                        {
                            "fvAEPgLagPolAtt": {
                                "attributes": {
                                    "annotation": ""
                                },
                                "children": [
                                    {
                                        "fvRsVmmVSwitchEnhancedLagPol": {
                                            "attributes": {
                                                "annotation": "",
                                                "tDn": "uni/vmmp-VMware/dom-{{ item.vmmDomainName }}/vswitchpolcont/enlacplagp-{{ item.elagName }}"
                                           }
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            }
    with_items: "{{ fvRsDomAtt }}"
    delegate_to: localhost

# the end
