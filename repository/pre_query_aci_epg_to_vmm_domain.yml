#It is generated by the script with the sourcing file as:1c_create_vmm_domain.yaml
  - name: 3a Map Tenant VMM Domain to new EPGs
    aci_epg_to_domain:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     tenant: "{{ item.tenantName }}"
     ap: "{{ item.apName }}"
     epg: "{{ item.epgName }}"
     domain: "{{ item.domainName }}"
     domain_type: vmm
     vm_provider: vmware
     resolution_immediacy: pre-provision
     deploy_immediacy: immediate
     state: query
     validate_certs: no
    register: query_result
    with_items: "{{ aci_epg_to_vmm_domain }}"
    delegate_to: localhost


  - name: Assert the existing object
    assert:
      that:
      - item.current == []
      success_msg: "Object does not exist. Can create it."
      fail_msg: "Object exists. DO NOT recreate it!."
    with_items: "{{query_result.results}}"

