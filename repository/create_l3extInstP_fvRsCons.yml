#It is generated by the script with the sourcing file as:2d_create_consumer_provider_relationships.yml
  - name: pb6e Create Consumer in L3out Ext EPGs
    aci_rest:
      host: "{{inventory_hostname}}"
      username: "{{username}}"
      password: "{{password}}"
      validate_certs: no
      path: /api/node/mo/uni/tn-{{ item.tenant }}/out-FabCore_L3Out/instP-{{ item.extEpgName }}.json
      method: post
      content: |
        {
            "l3extInstP": {
                "attributes": {
                  "annotation": "",
                  "descr": "",
                  "dn": "uni/tn-{{ item.tenant }}/out-FabCore_L3Out/instP-{{ item.extEpgName }}",
                  "exceptionTag": "",
                  "floodOnEncap": "disabled",
                  "matchT": "AtleastOne",
                  "name": "{{ item.extEpgName }}",
                  "nameAlias": "",
                  "prio": "unspecified",
                  "targetDscp": "unspecified"
                },
                "children": [
                      {
                          "fvRsCons": {
                              "attributes": {
                                  "annotation": "",
                                  "prio": "unspecified",
                                  "tnVzBrCPName": "{{ item.Consumed }}"
                              }
                          }
                      },
                  ]
              }
        }
    with_items: "{{l3extInstP_fvRsCons}}"
    delegate_to: localhost
    ignore_errors: yes

# the end
