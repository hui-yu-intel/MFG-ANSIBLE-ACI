#It is generated by the script with the sourcing file as:imCloud_depolyment.yml
  - name: Create User Tenant DHCP Relay Policy
    aci_rest:
      hostname: '{{ inventory_hostname }}'
      username: '{{ username }}'
      password: '{{ password }}'
      validate_certs: no
      path: /api/node/mo/uni/tn-{{ item.tenantName }}/relayp-{{ item.dhcpRelayName }}.json
      method: post
      content: |
         {
           "dhcpRelayP": {
               "attributes": {
                   "annotation": "",
                   "descr": "",
                   "dn": "uni/tn-{{ item.tenantName }}/relayp-{{ item.dhcpRelayName }}",
                   "mode": "visible",
                   "name": "{{ item.dhcpRelayName }}",
                   "nameAlias": "",
                   "owner": "tenant",
                   "ownerKey": "",
                   "ownerTag": ""
               },
               "children": [
                   {
                       "dhcpRsProv": {
                           "attributes": {
                               "addr": "{{ item.dhcpServer1 }}",
                               "annotation": "",
                               "tDn": "uni/tn-{{ item.tenantName }}/out-{{ item.l3outName }}/instP-{{ item.dhcpExtEpg1 }}"
                           }
                       }
                   },
                   {
                       "dhcpRsProv": {
                           "attributes": {
                               "addr": "{{ item.dhcpServer2 }}",
                               "annotation": "",
                               "tDn": "uni/tn-{{ item.tenantName }}/out-{{ item.l3outName }}/instP-{{ item.dhcpExtEpg2 }}"
                                       }
                                   }
                               }
                           ]
                       }
                   }
    with_items: "{{ dhcpRelayP }}"
    delegate_to: localhost

# the end
