#It is generated by the source task as:task_list.txt
  - name: Deploy Policy Group EPG Static Path bindings
    aci_static_binding_to_epg:
      hostname: '{{ inventory_hostname }}'
      username: '{{ username }}'
      password: '{{ password }}'
      validate_certs: no
      tenant: "{{ item.tenantName  }}"
      ap: "{{ item.appProfileName }}"
      epg: "{{ item.epgName }}"
      encap_id: "{{ item.encapID }}"
      deploy_immediacy: immediate
      interface_mode: "{{ item.interfaceMode }}"
      interface_type: "{{ item.interfaceType }}"
      interface: "{{ item.policyGroupName }}_PolGrp"
      pod_id: "{{ item.podID }}"
      leafs: "{{ item.leafID }}"
      state: query
    register: query_result
    with_items: "{{ aci_static_binding_to_epg }}"
    delegate_to: localhost


  - name: Assert the existing object
    assert:
      that:
      - item.current == []
      success_msg: "Object does not exist. Can create it."
      fail_msg: "Object exists. DO NOT recreate it!."
    with_items: "{{query_result.results}}"

