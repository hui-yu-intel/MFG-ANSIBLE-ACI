#It is generated by the source task as:task_list.txt
  - name: 3a Post Query EPG Encap VLANs to DC VLAN Pool
    aci_vlan_pool_encap_block:
      hostname: '{{ inventory_hostname }}'
      username: '{{ username }}'
      password: '{{ password }}'
      validate_certs: no
      block_name: '{{ item.vlanDesc }}'
      pool: '{{ item.vlanPool }}'
      pool_allocation_mode:  '{{ item.vlanPoolAllMode }}'
      allocation_mode: '{{ item.vlanAllMode }}'
      block_start: '{{ item.startVlan }}'
      block_end: '{{ item.endVlan }}'
      description: '{{ item.vlanDesc }}'
      state: query
    register: query_result
    with_items: "{{ aci_vlan_pool_encap_block }}"
    delegate_to: localhost


  - name: Assert the existing object
    assert:
      that:
      - item.current == []
      success_msg: "Object does not exist. Can create it."
      fail_msg: "Object exists. DO NOT recreate it!."
    with_items: "{{query_result.results}}"

